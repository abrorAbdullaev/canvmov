var CanvMov={canvas:null,context:null,mouseThorttleTimer:null,options:{width:window.innerWidth,height:window.innerHeight,relativeToWindow:!1,images:{},centerX:"",centerY:"",canvasId:"",bgImage:{url:"",fIndex:0}},init:function(t){"object"!=typeof t&&console.log("CanvMov options is not an Object");var e=this;this.options=this._extend(this.options,t),this._prepareCanvas(),this._prepareBg(),this.initialRender(),!0===this.options.relativeToWindow?window.addEventListener("mousemove",function(t){e._throttle(e.handleMouseMove,20,[t,e])}):this.canvas.addEventListener("mousemove",function(t){e._throttle(e.handleMouseMove,20,[t,e])})},handleMouseMove:function(t,e){e.context.clearRect(0,0,e.canvas.width,e.canvas.height);var i=e._calcDelta(t),n=e._calcDeltaY(t);e.reRenderBg(i),e.reRender(i,n)},initialRender:function(){var t=this;this.options.centerX=this.canvas.width/2,this.options.centerY=this.canvas.height/2,this.options.bgImage.ImageObject.onload=function(){t.reRenderBg(0),t._prepareImages();for(var e=0;e<t.options.images.length;e++)t.render(e)}},reRenderBg:function(t){var e=this.options.bgImage.fIndex*t;this.context.drawImage(this.options.bgImage.ImageObject,parseInt(e-100*Math.abs(this.options.bgImage.fIndex)),0,this.canvas.width+220*Math.abs(this.options.bgImage.fIndex),this.canvas.height)},render:function(t){var e=this;this.options.images[t].ImageObject.onload=function(){var i=e.options.images[t].positionFromLeft,n=e.options.images[t].positionFromTop;e.context.drawImage(e.options.images[t].ImageObject,parseInt(i),parseInt(n))}},reRender:function(t,e){for(var i=0;i<this.options.images.length;i++){var n=this.options.images[i].positionFromLeft+t*this.options.images[i].fIndex,o=this.options.images[i].positionFromTop+e*this.options.images[i].fIndexY;this.context.drawImage(this.options.images[i].ImageObject,n,o)}},getInstance:function(){var t={};for(key in this)t[key]=this[key];return t},_calcDelta:function(t){var e=t.clientX;return this.options.relativeToWindow?parseInt(e/(window.outerWidth/2)*100)-100:parseInt((e-this.canvas.getBoundingClientRect().x)/this.options.centerX*100)-100},_calcDeltaY:function(t){var e=t.clientY;return parseInt(e/this.options.centerY*100)-100},_prepareBg:function(){this.options.bgImage.ImageObject=new Image,this.options.bgImage.ImageObject.src=this.options.bgImage.url},_prepareImages:function(){for(imageIndex in this.options.images)this.options.images[imageIndex].ImageObject=new Image,this.options.images[imageIndex].ImageObject.src=this.options.images[imageIndex].url,this.options.images[imageIndex].positionFromLeft=this.options.images[imageIndex].positionFromLeft/100*this.canvas.width,this.options.images[imageIndex].positionFromTop=this.options.images[imageIndex].positionFromTop/100*this.canvas.height},_prepareCanvas:function(){this.canvas=document.getElementById(this.options.canvasId),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,this.context=this.canvas.getContext("2d")},_extend:function(t,e){var i,n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},_throttle:function(t,e,i){var n=this;null===this.mouseThorttleTimer&&(this.mouseThorttleTimer=setTimeout(function(){t(...i),n.mouseThorttleTimer=null},e))}};